# 图书馆管理系统需求分析

## 1. 项目概述

### 1.1 项目背景

本项目旨在为拥有1000名学生的学校开发一套现代化的图书馆管理系统，以提高图书馆的运营效率，优化学生和教职工的借阅体验，并实现图书资源的数字化管理。

### 1.2 项目目标

构建一个基于Web的图书馆管理系统，支持图书信息管理、用户管理、借阅管理、库存管理等核心功能，为学校图书馆提供完整的数字化解决方案。

### 1.3 技术架构

- **应用架构**: 前后端分离的单体应用
- **后端框架**: Spring Boot 3.x
- **构建工具**: Maven
- **数据库**: SQLite
- **数据访问层**: MyBatis Plus 3.5.x+
- **代码简化工具**: Lombok
- **开发语言**: Java 17+
- **前端技术**: HTML5 + CSS3 + JavaScript + jQuery + LayUI
- **前端部署**: 静态文件存放在resources/static目录
- **资源加载**: CDN方式引入前端框架
- **Web服务器**: 内置Tomcat
- **数据交互**: RESTful API + JSON数据格式

#### 1.3.1 MyBatis Plus集成说明

MyBatis Plus作为MyBatis的增强工具，提供了丰富的功能来简化数据库操作。系统将使用MyBatis Plus的以下核心特性：

- **代码生成器**: 自动生成实体类、Mapper接口和Service层代码，提高开发效率
- **CRUD接口**: 内置常用的增删改查方法，减少重复代码编写
- **条件构造器**: 提供链式调用的查询条件构建，支持复杂查询场景
- **分页插件**: 内置分页功能，简化分页查询实现
- **SQL性能监控**: 提供SQL执行时间监控，便于性能优化

MyBatis Plus与SQLite数据库完全兼容，支持SQLite特有的数据类型和语法特性。系统配置将针对SQLite进行优化，确保最佳的数据访问性能。

#### 1.3.2 Lombok集成说明

Lombok通过注解方式自动生成Java样板代码，显著提升开发效率并减少代码冗余。系统将使用Lombok的以下主要功能：

- **@Data**: 自动生成getter、setter、toString、equals和hashCode方法
- **@Entity/@Builder**: 简化实体类构建和Builder模式实现
- **@Slf4j**: 自动生成日志记录器，统一日志管理
- **@RequiredArgsConstructor**: 自动生成必需参数的构造函数
- **@Value**: 创建不可变对象类

Lombok需要在开发环境中安装相应的IDE插件支持，确保代码提示和调试功能的正常使用。编译时Lombok注解会被自动处理，生成的字节码包含完整的方法实现。

## 2. 用户角色定义

### 2.1 图书管理员

图书管理员是系统的主要操作者，负责图书馆的日常管理工作。主要职责包括图书信息的录入和维护、用户账户管理、借阅和归还处理、库存盘点、报表生成等核心管理功能。

### 2.2 普通用户（学生和教职工）

普通用户主要使用系统进行图书查询、借阅历史查看、个人信息管理等自助服务。他们可以通过系统检索所需图书、查看图书可借状态、了解自己的借阅记录和到期提醒。

## 3. 功能需求分析

### 3.1 图书管理模块

图书管理模块是系统的核心功能模块，提供图书信息的全生命周期管理。系统需要支持图书的添加、修改、删除和查询功能。图书信息应包含书名、作者、出版社、出版日期、ISBN号、图书分类、图书简介、库存数量、可借数量等关键字段。系统还需要支持批量导入图书信息，以提高图书录入效率。

通过MyBatis Plus的代码生成器，可以快速生成图书实体类和数据访问层代码。使用Lombok注解简化图书实体类的定义，自动生成必要的getter、setter和构造方法。MyBatis Plus的条件构造器将支持复杂的图书检索条件组合，提供灵活的查询功能。

图书分类管理功能允许管理员创建和维护图书分类体系，支持多级分类结构。系统应提供灵活的图书检索功能，支持按书名、作者、ISBN、分类等多种条件进行精确或模糊查询。

### 3.2 用户管理模块

用户管理模块负责处理学生和教职工的账户信息管理。系统需要支持用户信息的添加、修改、删除和查询功能。用户信息应包含用户ID、姓名、身份类型（学生/教职工）、班级或部门、联系方式、注册日期等基本信息。

使用Lombok简化用户实体类的定义，通过@Data注解自动生成标准的JavaBean方法。MyBatis Plus提供的批量操作功能将支持用户信息的批量导入，便于新学期学生信息的快速录入。用户管理还包括用户状态管理，如正常、冻结、毕业等状态的设置和维护。

### 3.3 借阅管理模块

借阅管理模块处理图书的借出和归还业务流程。系统需要支持借书操作，包括用户身份验证、图书可借性检查、借阅记录生成等功能。借阅规则应该灵活可配置，包括不同用户类型的借书数量限制、借阅期限设置等。

MyBatis Plus的分页插件将为借阅记录查询提供高效的分页支持。通过条件构造器可以实现复杂的借阅记录检索，如按用户、时间范围、图书类型等条件的组合查询。Lombok注解将简化借阅记录实体类的定义和数据传输对象的创建。

还书操作需要支持正常归还和逾期归还处理。系统应自动计算逾期天数，并根据配置的规则处理逾期费用。续借功能允许用户延长借阅期限，但需要检查图书是否有预约和用户是否有逾期记录。

### 3.4 预约管理模块

当图书暂时无库存时，用户可以通过预约功能排队等待。系统需要维护预约队列，当图书归还时自动通知预约用户。预约管理包括预约申请、预约取消、预约通知等功能。

### 3.5 查询统计模块

系统应提供丰富的查询和统计功能，支持图书借阅统计、热门图书排行、用户借阅行为分析等。管理员可以通过这些功能了解图书馆的运营状况，为图书采购和资源配置提供数据支持。MyBatis Plus的条件构造器和聚合函数支持将为统计功能提供强大的数据查询能力。

### 3.6 系统配置模块

系统配置模块允许管理员设置和调整系统运行参数，包括借阅规则配置、逾期费用标准、图书分类设置、系统通知模板等。这些配置应该支持在线修改，无需重启系统即可生效。

## 4. 非功能需求

### 4.1 性能要求

系统应能够支持1000名用户的并发访问，响应时间在正常网络条件下应控制在3秒以内。MyBatis Plus的SQL性能监控功能将帮助识别和优化慢查询。数据库查询应进行优化，合理使用MyBatis Plus的缓存机制，确保大数据量情况下的查询效率。系统应具备良好的扩展性，能够应对用户数量和图书数量的增长。

### 4.2 可用性要求

系统界面应简洁直观，操作流程清晰明了。普通用户应能够在最少的培训下快速掌握系统操作。系统应提供完善的错误提示和操作指导，帮助用户正确使用各项功能。

### 4.3 可靠性要求

系统应具备数据备份和恢复机制，确保数据安全。应用程序应具备异常处理能力，避免因单个操作错误导致系统崩溃。系统应记录详细的操作日志，通过Lombok的@Slf4j注解统一管理日志记录，便于问题追踪和系统维护。

### 4.4 兼容性要求

系统应支持主流浏览器，包括Chrome、Firefox、Safari、Edge等现代浏览器。前端LayUI框架通过CDN引入，确保框架版本的稳定性和加载速度。界面应采用响应式设计，适配桌面和平板设备的不同屏幕尺寸。系统应兼容Windows、macOS、Linux等主流操作系统的浏览器环境。

### 4.5 网络依赖性

系统启动后除CDN资源加载外，无需额外的外部网络依赖。建议在部署环境配置CDN资源的本地缓存策略，确保在网络不稳定情况下的系统可用性。前端静态资源应支持浏览器缓存，减少重复加载提升用户体验。

### 4.6 开发环境要求

由于项目使用Lombok，开发团队需要在IDE中安装Lombok插件以获得完整的开发体验。推荐使用IntelliJ IDEA或Eclipse，并确保安装最新版本的Lombok插件。团队成员需要熟悉Lombok的常用注解和MyBatis Plus的基本使用方法，建议在项目开始前进行相关技术培训。

## 5. 数据库设计要求

### 5.1 核心数据表

系统需要设计以下核心数据表：用户表存储用户基本信息，图书表存储图书详细信息，借阅记录表记录所有借还操作，预约表管理图书预约信息，分类表维护图书分类体系，系统配置表存储系统参数。

MyBatis Plus的代码生成器将根据数据表结构自动生成对应的实体类、Mapper接口和基础Service类。实体类将使用Lombok注解进行简化，减少样板代码。所有实体类应继承MyBatis Plus的BaseEntity类，自动获得通用的CRUD方法支持。

### 5.2 数据完整性

数据库设计应确保数据的完整性和一致性，通过外键约束维护表间关系，通过检查约束确保数据的有效性。应建立适当的索引以提高查询性能，特别是在经常查询的字段上建立索引。MyBatis Plus的条件构造器将充分利用这些索引来优化查询性能。

### 5.3 数据安全

虽然不使用专门的安全框架，但仍需要考虑基本的数据安全措施。用户密码应进行哈希处理存储，敏感操作应记录详细日志。数据库文件应定期备份，确保数据安全。MyBatis Plus提供的SQL注入防护机制将进一步提升数据安全性。

### 5.4 MyBatis Plus配置优化

针对SQLite数据库的特点，需要进行专门的MyBatis Plus配置优化。包括设置合适的数据库方言、配置自动填充功能、启用分页插件、配置SQL性能监控等。确保MyBatis Plus与SQLite的最佳集成效果，充分发挥两者的性能优势。

## 6. 前端技术架构要求

### 6.1 LayUI框架应用

系统前端基于LayUI框架构建，通过CDN方式引入框架资源。LayUI提供了丰富的UI组件和交互效果，系统应充分利用其表格、表单、弹层、分页等组件来构建静态HTML页面的用户界面。界面设计应遵循LayUI的设计规范，确保界面风格的一致性和用户体验的流畅性。所有页面内容通过JavaScript动态生成和更新，实现富交互的单页面应用体验。

### 6.2 jQuery交互处理

系统使用jQuery处理所有前端交互逻辑，包括页面初始化、数据加载、表单提交、数据验证、AJAX请求等功能。jQuery代码应遵循良好的编程规范，合理组织代码结构，避免全局变量污染。所有与后端的数据交互均通过RESTful API完成，前端负责解析JSON响应并更新页面显示内容。

### 6.3 静态页面架构

系统前端由多个静态HTML页面组成，所有页面文件存放在Spring Boot项目的src/main/resources/static目录中。每个HTML页面对应系统的一个功能模块，页面加载时通过JavaScript初始化LayUI组件并从同域的后端API获取初始数据。页面间的导航通过标准的HTML链接实现，确保用户体验的连贯性和浏览器历史记录的正确维护。静态资源与后端代码一同编译打包，简化了部署和维护过程。

### 6.4 响应式设计要求

虽然主要面向桌面环境使用，但系统界面应具备基本的响应式特性，能够在不同分辨率的显示器上正常显示。LayUI框架本身提供了栅格系统支持，系统应合理利用这些特性来适配不同的屏幕尺寸。静态HTML页面应采用灵活的布局设计，确保在各种桌面和平板设备上的良好显示效果。

### 6.5 CDN资源管理

所有前端框架和库文件通过CDN方式引入，包括LayUI、jQuery等核心库。CDN地址应选择稳定可靠的服务提供商，并在HTML页面中提供备用CDN地址配置。建议在生产环境中配置CDN资源的本地缓存策略，确保系统在网络环境不佳时的可用性。静态HTML文件应正确引用这些CDN资源，确保页面的快速加载和稳定运行。由于前端文件与后端打包在同一应用中，CDN依赖不会影响应用的独立部署特性。

## 7. 系统接口设计

### 7.1 Web界面架构

系统采用前后端分离的单体应用架构，前端静态HTML文件存放在Spring Boot项目的resources/static目录中，与后端代码一同打包部署。前端采用LayUI框架构建用户界面组件，通过CDN方式引入所有前端框架资源。用户通过浏览器访问静态HTML页面，页面通过JavaScript动态调用同域的后端API获取数据和处理业务逻辑。

### 7.2 前后端交互模式

前端静态页面通过jQuery发起AJAX请求调用后端Spring Boot提供的RESTful API接口。由于前后端部署在同一应用中，API调用为同域请求，无需处理跨域问题。后端控制器专门负责处理API请求并返回JSON格式数据，前端JavaScript负责解析JSON响应并动态更新页面内容。这种架构在实现前后端技术分离的同时，保持了单体应用部署简单的优势。

MyBatis Plus将简化控制器层的数据访问代码，通过内置的CRUD方法和条件构造器快速实现数据操作。Lombok注解将减少数据传输对象的样板代码，提高API开发效率。

### 7.3 数据导入导出

系统应支持Excel格式的数据导入导出功能，便于与现有系统的数据迁移和日常数据维护。导入功能应包括数据验证和错误报告，确保导入数据的准确性。MyBatis Plus的批量操作功能将为大量数据的导入提供高效支持。

## 8. 部署和运维要求

### 8.1 部署环境

系统采用前后端分离的单体应用架构，前端静态文件和后端代码一同打包为单个JAR文件，内置Tomcat服务器，支持一键启动部署。前端HTML、CSS、JavaScript文件存放在项目的src/main/resources/static目录中，Maven构建时自动将这些静态资源打包到JAR文件内。应用无需外部Web服务器或应用服务器，只需要Java运行环境即可同时运行前端页面和后端API服务。

部署时只需要一个JAR文件即可提供完整的图书馆管理系统服务，大大简化了部署复杂度。系统配置文件应支持外部化配置，允许在不同环境下调整数据库文件路径、服务端口、MyBatis Plus配置等关键参数。前端页面中的API调用地址无需配置，直接使用相对路径访问同域的后端服务。部署包应包含启动脚本和配置模板，便于系统管理员快速完成部署配置。

### 8.2 监控和日志

系统应提供基本的监控功能，包括系统运行状态、数据库连接状态等关键指标的监控。应建立完善的日志记录机制，使用Lombok的@Slf4j注解统一管理日志记录器，记录用户操作、系统错误、性能数据等信息，便于故障排查和系统优化。MyBatis Plus的SQL性能监控功能将为数据库操作性能分析提供重要数据支持。

### 8.3 备份策略

系统应提供数据备份功能，支持定期自动备份和手动备份。备份文件应包含完整的数据库数据和系统配置信息，确保系统能够在故障后快速恢复。

## 9. 项目实施计划

### 9.1 开发阶段

项目开发建议分为四个主要阶段：第一阶段完成基础框架搭建、MyBatis Plus配置和数据库设计，使用代码生成器创建基础的实体类和数据访问层代码；第二阶段实现核心功能模块，充分利用MyBatis Plus的CRUD接口和Lombok注解简化开发；第三阶段完善辅助功能和界面优化，集成分页、条件查询等高级功能；第四阶段进行系统测试和部署准备，验证MyBatis Plus性能优化效果。

### 9.2 技术培训要求

由于项目引入了MyBatis Plus和Lombok两个新技术，需要对开发团队进行相关技术培训。培训内容应包括MyBatis Plus的核心功能使用、Lombok注解的正确应用、IDE插件的安装配置等。建议在项目开始前完成技术培训，确保开发团队能够熟练使用这些工具。

### 9.3 测试要求

系统需要进行全面的功能测试、性能测试和兼容性测试。测试应覆盖所有功能模块和用户场景，特别关注MyBatis Plus的数据访问性能和Lombok生成代码的正确性，确保系统的稳定性和可靠性。应建立测试用例库，为后续的系统维护和升级提供测试基础。

### 9.4 文档要求

项目应交付完整的技术文档，包括系统设计文档、数据库设计文档、MyBatis Plus配置说明、API接口文档、部署指南和用户操作手册。文档应详细、准确，特别说明MyBatis Plus和Lombok的使用方式和注意事项，便于后续的系统维护和功能扩展。

## 10. 风险评估和对策

### 10.1 技术风险

主要技术风险包括SQLite在高并发情况下的性能限制、MyBatis Plus与SQLite的集成兼容性、Lombok在不同IDE环境下的兼容性等。对策包括优化MyBatis Plus配置、进行充分的集成测试、建立完善的备份机制、确保开发环境的统一配置等。

### 10.2 需求变更风险

学校需求可能在开发过程中发生变化，应建立灵活的系统架构，充分利用MyBatis Plus的扩展性支持功能的扩展和修改。采用模块化设计，降低需求变更对整体系统的影响。Lombok的使用将使代码更加简洁，便于快速响应需求变更。

### 10.3 数据安全风险

虽然不使用专门的安全框架，但仍需要考虑基本的数据安全措施，包括用户认证、数据加密、访问控制等。MyBatis Plus提供的参数绑定机制能够有效防止SQL注入攻击。应定期进行安全评估，及时发现和修复安全漏洞。

### 10.4 技术依赖风险

新增MyBatis Plus和Lombok依赖可能带来版本兼容性风险。应选择与Spring Boot 3.x兼容的稳定版本，建立版本管理策略，定期评估依赖库的安全更新。团队应保持对这些技术的持续学习，确保能够应对技术变化带来的挑战。